<!DOCTYPE html>
<html>

  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Stupid Fast NASCAR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="NASCAR fantasy website Stupid-Fast.com">
    <meta name="keywords" content="NASCAR">
  </head>

  <body>
    <a href="https://www.stupid-fast.com/"><img src="https://lh5.googleusercontent.com/VHx2YhJbF08rhdVwHzCO8EzWDAGaFsithJ4PONeGeKZ8cAu8iJL8f3Ne_WZDGEcHIYOmF-FIJcdYbg7XWHGDUbU_p18_rAfTSGeMuSk1kji9TNTwviXW9GGugjlQbcX8RV8"></a>



    <br><br>
    <font color="red">I made some adjustments to this page. Any issues let me know!</font><br>
    <br><br>

    <form id="form" name="myForm" action="https://script.google.com/macros/s/AKfycbwhlpFw2h-7mKHBabnRfgMf4k0qepj7KgVKyI6dTvsVrwiYbL4/exec" method="get" target="dummyframe">
      <input type="hidden" name="index" value="">
      <input type="hidden" name="value" value="">
      <input type="hidden" name="type" value="">
      <input type="submit">
    </form>

    <table id="table" border="0"></table>

    <script>
    //variables
    var form = document.getElementById("form");
    var table = document.getElementById("table");
    var newarray0 = [];
    var toptenarray = [];
    var players = ["Schriewer", "Mike", "Moore", "Dave", "Curt", "Tim", "Dean", "Evan", "Poepsel", "Nick", "(test)"];

      function validate(playr, indx) {
        document.getElementsByName("index")[0].value = indx;
        document.getElementsByName("value")[0].value = playr;
        var tt = document.getElementsByClassName(indx)[0];
        tt.style.display = "";
        document.getElementById("form").submit();
      }

      function trashtalk(className, trashtalkvalue) {
        document.getElementsByName("index")[0].value = className;
        document.getElementsByName("value")[0].value = trashtalkvalue;
        document.getElementsByName("type")[0].value = "trashtalk";
        document.getElementById("form").submit();
      }
      
      function dickTrickle(othervalue) {
        document.getElementsByName("index")[0].value = entry.length+3;
        document.getElementsByName("value")[0].value = othervalue;
        document.getElementsByName("type")[0].value = "other";
        document.getElementById("form").submit();
      }

      

      $(function() {
        var sheetUrl = 'https://spreadsheets.google.com/feeds/list/1CAyAdtlGMJVQVzqKae8Qk3kUUT4WsrxoDYLBu3w3GbY/2/public/full?alt=json';
        $.getJSON(sheetUrl, function(data) {
          entry = data.feed.entry;
          console.log(entry);

          entry.forEach(function(item, index) {
            var row = table.insertRow();
            var cell0 = row.insertCell(0);
            cell0.style.height = "30px";
            var cell1 = row.insertCell(1);
            var cell2 = row.insertCell(2);
            cell0.innerHTML = item.gsx$drivers.$t;
            //add to main array
            newarray0[index] = item.gsx$players.$t;
            toptenarray[index] = item.gsx$players.$t;
            //create select dropdown
            var select = document.createElement("select");
            select.id = index + 2;
            var option0 = document.createElement("option");
            select.appendChild(option0);
            select.name = item.gsx$drivers.$t;
            select.setAttribute("onchange", "validate(this.value, this.id)");
            //create options
            players.forEach(function(item1, index1) {
              var option1 = document.createElement("option");
              option1.text = item1;
              if (item.gsx$players.$t == item1) {
                option1.selected = "true";
              }
              //add to dropdown menu  
              select.appendChild(option1);
            });
            //add dropdown to second column
            cell1.appendChild(select);
            //create Trashtalk inpuit field
            var trashtalk = document.createElement("INPUT");
            trashtalk.style.display = "none";
            trashtalk.className = index + 2;
            trashtalk.placeholder = "trashtalk";
            trashtalk.setAttribute("onchange", "trashtalk(this.className, this.value)")
            cell2.appendChild(trashtalk);
          });
          var tenthrow = document.getElementsByTagName("TR")[10];
          tenthrow.innerHTML = "<td colspan='3'><hr></td>";
          
          //creat other driver input

          
        });

      });


    </script>

    <iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe" style="display:none;"></iframe>
    <br>
    <a target="_blank" href="https://script.google.com/d/165R7viTBypkyTYNavCDaflQHuV49C6e9lv4RaTODgV2jL3aEwh9bZQsT/edit?usp=sharing">Admin</a>
    <a target="_blank" href="https://github.com/nms553/nms553.github.io/edit/master/picks.html">GH</a>

  </body>

</html>
