
<!DOCTYPE html>
<html>

  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Stupid Fast NASCAR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="NASCAR fantasy website Stupid-Fast.com">
    <meta name="keywords" content="NASCAR">
  </head>

  <body>
    <br>
    <a href="https://www.stupid-fast.com/">Back to homepage</a><br>


    <br>
    <font color="red">I made some adjustments to this page. Any issues let me know!</font><br>
    (Trashtalk will be re-added later)
    <br><br><br>

    <form id="form" name="myForm" action="https://script.google.com/macros/s/AKfycbwhlpFw2h-7mKHBabnRfgMf4k0qepj7KgVKyI6dTvsVrwiYbL4/exec" method="post" target="dummyframe">
      <input type="hidden" name="player">
      <input type="hidden" name="index">
      <input type="hidden" name="color">
    </form>

    <table id="table" border="0"></table>

    <script>
      var players = ["Schriewer", "Mike", "Moore", "Dave", "Curt", "Tim", "Dean", "Evan", "Poepsel", "Nick"];
      var newarray0 = [];
      var toptenarray = [];

      function validate(playr, drivr, indx) {
        document.getElementsByName("index")[0].value = indx;
        document.getElementsByName("player")[0].value = playr;
        document.getElementById("form").submit();
        alert("done");
      }

      $(function() {
        var sheetUrl = 'https://spreadsheets.google.com/feeds/list/1CAyAdtlGMJVQVzqKae8Qk3kUUT4WsrxoDYLBu3w3GbY/2/public/full?alt=json';
        $.getJSON(sheetUrl, function(data) {
          entry = data.feed.entry;
          console.log(entry);

          entry.forEach(function(item, index) {
            var row = table.insertRow();
            var cell0 = row.insertCell(0);
            var cell1 = row.insertCell(1);
            var cell2 = row.insertCell(2);
            cell0.innerHTML = item.gsx$drivers.$t;
            //add to main array
            newarray0[index] = item.gsx$players.$t;
            toptenarray[index] = item.gsx$players.$t;
            //create select dropdown
            var select = document.createElement("select");
            select.id = index+2;
            var option0 = document.createElement("option");
            select.appendChild(option0);
            select.name = item.gsx$drivers.$t;
            select.setAttribute("onchange", "validate(this.value, this.name, this.id)");
            //create options
            players.forEach(function(item1, index1) {
              var option1 = document.createElement("option");
              option1.text = item1;
              if (item.gsx$players.$t == item1) {
                option1.selected = "true";
              }
              select.appendChild(option1);
            });

            cell1.appendChild(select);

          });
          var tenthrow = document.getElementsByTagName("TR")[10];
          tenthrow.innerHTML = "<td colspan='3'><hr></td>";
        });

      });
      var form = document.getElementById("form");
      var table = document.getElementById("table");

    </script>

    <iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe" style="display:none;"></iframe>

  </body>

</html>
